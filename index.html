<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="main.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

	</head>

	<body style="margin: 0 auto;">
	<center><h1>The Color Changer</h1></center>
		<div style="width: 100%; background-color: #F7CE3E">
			<div id="divText">
<textarea id="textArea" rows="25">
<html>
	<head>
		<title>Changed Text</title>
	</head>
	<body class="awesome" id="cool">
		<p id="default-p">Change the HTML!</p>
	</body>
</html>
</textarea>
			</div>
			<div id="inputHolder">
				<div id="containerDiv">
					<div id="inputDiv">
						<select name="tags" class="inputs">
						</select>
						<input type="color" name="colorPicker" class="inputs">
						<input type="" name="other" class="inputs">
					</div>
				</div>
				<button  onClick="addDiv()" class="inputs">Add Style</button><br>
				<button onClick="" class="inputs">Submit</button>
			</div>
		</div>
		<div>
			<iframe id="frame" src="" >
				
			</iframe>
		</div>
		<script type="text/javascript">
			var tags = new Array();
			var colors = new Array();
			var other = new Array();
			function addDiv()
			{
				var defaultDiv = document.getElementById("inputDiv");
				var newDiv = defaultDiv.cloneNode(true);
				document.getElementById("containerDiv").appendChild(newDiv);
			}


			function makeIframe() {
				var HTMLstr = $('#textArea').val();
				var blob = new Blob ([HTMLstr], {type: "text/html"});
				var url = URL.createObjectURL(blob);
				$('#frame').attr('src', url);
				setTimeout(getTextTags, 1000);
			}

			function getTextTags() {
				var tags = new Array();
				tags = getTags(tags, $('#frame')[0].contentDocument.children);

				function getTags(arr, node) {
					console.log(node);
					for (var i = 0; i < node.length; i++) {
						arr.push(node[i].localName);
						if (node[i].id != "") arr.push("#" + node[i].id);
						if (node[i].className != "") arr.push("." + node[i].className);
						arr.concat(getTags(arr, node[i].children));
					}
					return arr;
				}

				console.log(tags);
			}

			makeIframe();





			/*function submit()
			{
				var allStyles = document.getElementById("containerDiv").childNodes;
				for (var i = 0; i < allStyles.length; i++) 
				{
					var children = allStyles[i].childNodes;
					for (var i = 0; i < children.length; i++) 
					{
						if(i===0){tags.push(children[i]);}
						else if(i===1){colors.push(children[i]);}
						else{other.push(children[i]);}
					}
				}
				console.log(tags[0]);
				console.log(colors[0]);
				console.log(other[0]);
			}*/
		</script>
	</body>





</html>
